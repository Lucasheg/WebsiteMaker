<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>CITEKS Website Maker (Form Edition)</title>
<meta name="description" content="Fill a brief → generate a professional one-page site preview. No build tools required." />
<style>
  :root{
    --bg:#f7f7f7; --panel:#ffffff; --ink:#0f172a; --muted:#475569; --hair:#e5e7eb; --accent:#0ea5e9;
    --p:16px; --h6:18px; --h5:20px; --h4:25px; --h3:31.25px; --h2:39.06px; --h1:48.83px;
  }
  html,body{height:100%; background:var(--bg); color:var(--ink); font-family:ui-sans-serif,system-ui,-apple-system,"Segoe UI",Roboto,"Helvetica Neue",Arial}
  *{box-sizing:border-box}
  .wrap{display:grid; grid-template-columns:minmax(320px, 520px) 1fr; gap:16px; padding:16px; max-width:1440px; margin:0 auto;}
  .panel{background:var(--panel); border:1px solid var(--hair); border-radius:16px; box-shadow:0 10px 30px rgba(0,0,0,.04);}
  .container{max-width:1200px; margin:0 auto; padding:0 16px;}
  .btn{display:inline-flex; align-items:center; gap:8px; background:var(--accent); color:#fff; padding:10px 14px; border-radius:999px; text-decoration:none; border:none; cursor:pointer;}
  .btn.sec{background:#0f172a;}
  .thin{border-top:1px solid var(--hair);}
  .ts-p{font-size:var(--p); line-height:1.5;}
  .ts-h6{font-size:var(--h6); line-height:1.3; letter-spacing:-0.005em;}
  .ts-h5{font-size:var(--h5); line-height:1.3; letter-spacing:-0.01em;}
  .ts-h4{font-size:var(--h4); line-height:1.3; letter-spacing:-0.012em;}
  .ts-h3{font-size:var(--h3); line-height:1.2; letter-spacing:-0.015em;}
  .ts-h2{font-size:var(--h2); line-height:1.1; letter-spacing:-0.018em;}
  .ts-h1{font-size:var(--h1); line-height:1.0; letter-spacing:-0.02em;}

  header.site {padding:12px 16px; display:flex; align-items:center; justify-content:space-between; border-radius:16px;}
  header.site nav a{color:var(--ink); text-decoration:none; margin-left:16px}
  main#app{display:grid; gap:16px; margin-top:16px}
  footer.site{padding:16px; border-radius:16px; margin-top:16px}

  .hero{position:relative; overflow:hidden; border-radius:16px;}
  .hero-img{position:absolute; inset:0; background-position:center; background-size:cover; transform:scale(1.02);}
  .hero-scrim{position:absolute; inset:0; background:linear-gradient(180deg, rgba(0,0,0,.38), rgba(0,0,0,.25));}
  .hero-copy{position:relative; color:#fff; padding:24px; max-width:720px;}
  .ar-2-1{aspect-ratio:2/1;}

  .grid{display:grid; gap:12px}
  .cols-auto{grid-template-columns:repeat(auto-fit, minmax(260px,1fr));}

  .reveal{opacity:0; transform:translateY(12px); transition:opacity .45s ease, transform .45s ease;}
  .reveal.visible{opacity:1; transform:none;}

  .input{width:100%; padding:10px 12px; border:1px solid var(--hair); border-radius:12px; background:#fff}
  textarea{resize:vertical}
  .tips{color:var(--muted)}
  .logo-chip{display:inline-block; padding:10px 12px; border:1px solid var(--hair); border-radius:12px; text-align:center}
  .badge{display:inline-block; padding:4px 10px; border-radius:999px; background:rgba(255,255,255,.15); color:#fff; font-size:14px;}
</style>
</head>
<body>
  <div class="wrap">
    <!-- Left: Brief form -->
    <aside class="panel" style="padding:16px; align-self:start;">
      <div class="ts-h5" style="font-weight:700">Brief</div>
      <p class="ts-h6 tips" style="margin-top:4px">Fill what you know. The preview updates live.</p>

      <div style="display:grid; gap:10px; margin-top:12px">
        <label class="ts-h6">Company name <input id="name" class="input" placeholder="e.g., Harbor & Sage Law"></label>
        <label class="ts-h6">Tagline <input id="tagline" class="input" placeholder="Practical counsel for complex transactions"></label>
        <label class="ts-h6">Locations (comma separated) <input id="locations" class="input" placeholder="Oslo, New York, Amsterdam"></label>
        <label class="ts-h6">Industry
          <select id="industry" class="input">
            <option value="law">Law</option>
            <option value="clinic">Clinic</option>
            <option value="gym">Gym</option>
            <option value="saas">SaaS</option>
          </select>
        </label>
        <div class="grid" style="grid-template-columns:1fr 1fr; gap:8px">
          <label class="ts-h6">Primary color <input id="primary" class="input" value="#0F172A"></label>
          <label class="ts-h6">Accent color <input id="accent" class="input" value="#0EA5E9"></label>
        </div>
        <label class="ts-h6">Neutral background <input id="secondary" class="input" value="#F7F7F7"></label>
        <label class="ts-h6">Hero image URL (optional) <input id="hero" class="input" placeholder="https://…/your-image.jpg"></label>

        <label class="ts-h6">Primary goal
          <select id="goal" class="input">
            <option>Consultation</option>
            <option>Book appointment</option>
            <option>Start demo</option>
            <option>Get quote</option>
          </select>
        </label>

        <label class="ts-h6">Differentiators (one per line)
          <textarea id="diff" class="input" rows="3" placeholder="Clear fee structures&#10;Ex in-house counsel bench"></textarea>
        </label>

        <label class="ts-h6">Testimonials (one per line: quote — author)
          <textarea id="testi" class="input" rows="3" placeholder="They guided a complex deal. — COO, Meridian"></textarea>
        </label>

        <label class="ts-h6">Client logos (comma separated) <input id="logos" class="input" placeholder="Aldin Capital, Meridian Partners, Koto Energy"></label>

        <label class="ts-h6">Metrics (one per line: Label: Value)
          <textarea id="metrics" class="input" rows="3" placeholder="Deals advised: 220&#10;Average close time: 14 days"></textarea>
        </label>
      </div>

      <div style="display:flex; gap:8px; margin-top:12px">
        <button class="btn" id="loadExample" type="button">Load example</button>
        <button class="btn sec" id="exportHtml" type="button">Export HTML</button>
      </div>

      <div class="thin" style="margin:12px 0"></div>
      <details>
        <summary class="ts-h6" style="cursor:pointer">Advanced: JSON view</summary>
        <p class="ts-h6 tips" style="margin:8px 0 4px">You can paste JSON here instead of the form:</p>
        <textarea id="json" class="input" rows="12" placeholder='{"company":{...}}'></textarea>
        <div id="err" class="ts-h6" style="color:#dc2626; margin-top:8px;"></div>
      </details>
    </aside>

    <!-- Right: Site preview -->
    <section>
      <header class="panel site">
        <div class="ts-h6" id="brandName" style="font-weight:600">Brand</div>
        <nav class="ts-h6">
          <a href="#work">Work</a>
          <a href="#services">Services</a>
          <a href="#contact">Contact</a>
        </nav>
      </header>

      <main id="app"></main>

      <footer class="panel site">
        <div class="ts-h6 tips">© <span id="year"></span> <span id="brandName2"></span></div>
      </footer>
    </section>
  </div>

<script>
/* ===== Sample brief (used by "Load example") ===== */
const SAMPLE = {
  company: {
    name: "Harbor & Sage Law",
    tagline: "Practical counsel for complex transactions",
    locations: ["Oslo","New York","Amsterdam"],
    industry: "law",
    brand: { primary:"#0F172A", secondary:"#F7F7F7", accent:"#0EA5E9", heroImage:null }
  },
  goals: { primary:"Consultation", secondary:["Download brochure"] },
  differentiators: ["Clear fee structures","Bench of ex-in-house lawyers","Deal-first, not theory-first"],
  proof: {
    logos: ["Aldin Capital","Meridian Partners","Koto Energy"],
    testimonials: [{quote:"They guided a complex cross-border deal with clarity.", author:"COO, Meridian"}],
    metrics:[{label:"Deals advised", value:"220"}, {label:"Average close time", value:"14 days"}]
  },
  pages: { mustHave:["home","services","pricing","contact"] }
};

/* ===== Playbooks per industry ===== */
const PLAYBOOKS = {
  law:   { heroKind:"editorial", ctas:{primary:"Book consultation", secondary:"Download brochure"} },
  clinic:{ heroKind:"image",     ctas:{primary:"Book appointment", secondary:"Call clinic"} },
  gym:   { heroKind:"image",     ctas:{primary:"Start trial",      secondary:"View programs"} },
  saas:  { heroKind:"product",   ctas:{primary:"Start demo",       secondary:"Talk to sales"} }
};

/* ===== Generator: brief -> dsl ===== */
function generateDSL(brief){
  const pb = PLAYBOOKS[brief?.company?.industry] || PLAYBOOKS.saas;
  const brand = {
    name: brief?.company?.name || "Your company",
    tagline: brief?.company?.tagline || "",
    colors: {
      primary: brief?.company?.brand?.primary || "#0F172A",
      secondary: brief?.company?.brand?.secondary || "#F7F7F7",
      accent: brief?.company?.brand?.accent || "#0EA5E9"
    }
  };
  const heroImage = brief?.company?.brand?.heroImage || null;
  const sections = [];

  sections.push({
    type:"hero",
    variant: pb.heroKind,
    title: brand.name,
    subtitle: brand.tagline || "We make websites pay for themselves.",
    badge: (brief?.company?.locations||[]).join(" · "),
    primaryCta: { label: brief?.goals?.primary || pb.ctas.primary, href:"#contact" },
    secondaryCta: brief?.goals?.secondary?.[0] ? { label: brief.goals.secondary[0], href:"#contact" } : null,
    heroImage
  });

  const diffs = (brief?.differentiators||[]).slice(0,6).map(d=>({title:d, text:"Built into our day-to-day process."}));
  if (diffs.length){
    sections.push({ type:"value", title:"What you get with us", items:diffs });
  }

  const services = deriveServices(brief?.company?.industry);
  sections.push({ type:"services", title:"Services", items:services });

  if (brief?.proof && (brief.proof.logos?.length || brief.proof.testimonials?.length || brief.proof.metrics?.length)){
    sections.push({
      type:"proof",
      logos:brief.proof.logos||[],
      testimonials:brief.proof.testimonials||[],
      metrics:brief.proof.metrics||[]
    });
  }

  if ((brief?.pages?.mustHave||[]).includes("pricing")){
    sections.push({ type:"pricing", title:"Pricing", note:"Transparent estimates. Fixed-fee options available.", tiers:[
      { name:"Starter", price:"$900", items:["2–3 pages","Responsive","Lead form"] },
      { name:"Growth",  price:"$2,300", items:["5–7 pages","SEO + schema","Booking & Maps","Integrations"] },
      { name:"Scale",   price:"$7,000", items:["10+ pages","Strategy + funnel","Advanced SEO/analytics","CRM / e-com"] }
    ]});
  }

  sections.push({ type:"cta", title:"Ready to move faster?", cta:{label: brief?.goals?.primary || pb.ctas.primary, href:"#contact"} });
  sections.push({ type:"contact", title:"Contact", email:"contact@citeks.net", locations: brief?.company?.locations || [] });

  return { meta:{ brand }, pages:[{ slug:"home", sections }] };
}

function deriveServices(industry){
  if (industry==="law") return [
    { title:"M&A & Transactions", text:"Deal structuring, diligence, and closing guidance."},
    { title:"Commercial Contracts", text:"Clear, enforceable agreements that move business forward."},
    { title:"Data & Compliance", text:"Practical counsel on privacy and regulatory obligations."}
  ];
  if (industry==="saas") return [
    { title:"Onboarding flows", text:"Reduce time-to-value with frictionless onboarding."},
    { title:"Pricing architecture", text:"Plans, entitlements, and clarity that convert."},
    { title:"Docs & SEO", text:"Content that compounds organic growth."}
  ];
  if (industry==="clinic") return [
    { title:"Primary care", text:"Accessible care with fast booking."},
    { title:"Specialists", text:"Targeted expertise and clear referrals."},
    { title:"Diagnostics", text:"Modern equipment and gentle guidance."}
  ];
  if (industry==="gym") return [
    { title:"Elite Coaching", text:"High-intensity coaching for rapid progress."},
    { title:"Strength Builder", text:"Progressive overload with accountability."},
    { title:"Conditioning Lab", text:"Cardio and mobility for sustainable energy."}
  ];
  return [
    { title:"Strategy & IA", text:"Define goals, sitemap, and decision pathways."},
    { title:"Design System", text:"Reusable components with accessibility baked in."},
    { title:"Performance & SEO", text:"Lighthouse-focused builds with schema and structure."}
  ];
}

/* ===== Renderer ===== */
function renderSite(dsl){
  const brand = dsl.meta.brand;
  document.documentElement.style.setProperty("--ink", brand.colors.primary);
  document.documentElement.style.setProperty("--accent", brand.colors.accent);
  document.documentElement.style.setProperty("--bg", brand.colors.secondary);

  document.getElementById("brandName").textContent = brand.name;
  document.getElementById("brandName2").textContent = brand.name;
  document.getElementById("year").textContent = new Date().getFullYear();

  const app = document.getElementById("app");
  app.innerHTML = "";

  dsl.pages[0].sections.forEach(s=>{
    app.appendChild(sectionEl(s, brand));
  });

  // simple reveal-on-scroll
  const obs = new IntersectionObserver((entries)=>{
    entries.forEach(e=>{ if(e.isIntersecting) e.target.classList.add("visible"); });
  }, {threshold:0.25});
  document.querySelectorAll(".reveal").forEach(el=>obs.observe(el));
}

function sectionEl(s, brand){
  const wrap = document.createElement("section");
  wrap.className = "panel reveal";
  wrap.style.padding = "16px";

  if (s.type==="hero"){
    wrap.className = "hero ar-2-1 reveal";
    wrap.style.padding = "0";
    const bg = document.createElement("div");
    bg.className = "hero-img";
    bg.style.backgroundImage = s.heroImage ? `url(${s.heroImage})` : `linear-gradient(120deg, ${brand.colors.primary}, ${brand.colors.accent})`;
    const scrim = document.createElement("div");
    scrim.className = "hero-scrim";
    const copy = document.createElement("div");
    copy.className = "hero-copy";
    if (s.badge){ const b = document.createElement("div"); b.className="badge"; b.textContent = s.badge; copy.appendChild(b); }
    const h1 = document.createElement("h1"); h1.className="ts-h1"; h1.style.fontWeight="700"; h1.style.marginTop="8px"; h1.textContent=s.title;
    const p = document.createElement("p"); p.className="ts-h6"; p.style.marginTop="8px"; p.style.color="rgba(255,255,255,.88)"; p.textContent=s.subtitle;
    const ctas = document.createElement("div"); ctas.style.display="flex"; ctas.style.gap="12px"; ctas.style.marginTop="16px";
    if (s.primaryCta){ const a=document.createElement("a"); a.className="btn"; a.href=s.primaryCta.href; a.textContent=s.primaryCta.label; ctas.appendChild(a); }
    if (s.secondaryCta){ const a=document.createElement("a"); a.className="btn sec"; a.href=s.secondaryCta.href; a.textContent=s.secondaryCta.label; ctas.appendChild(a); }
    copy.append(h1,p,ctas);
    wrap.append(bg,scrim,copy);
    return wrap;
  }

  if (s.type==="value" || s.type==="services" || s.type==="features" || s.type==="programs"){
    const h2 = document.createElement("h2"); h2.className="ts-h2"; h2.style.fontWeight="700"; h2.textContent = s.title;
    const grid = document.createElement("div"); grid.className="grid cols-auto"; grid.style.marginTop="12px";
    (s.items||[]).forEach(it=>{
      const card = document.createElement("div"); card.className="panel"; card.style.padding="16px";
      const t = document.createElement("div"); t.className="ts-h5"; t.style.fontWeight="600"; t.textContent = it.title;
      const tx = document.createElement("div"); tx.className="ts-h6"; tx.style.color="var(--muted)"; tx.style.marginTop="4px"; tx.textContent = it.text;
      card.append(t,tx); grid.appendChild(card);
    });
    wrap.append(h2,grid); return wrap;
  }

  if (s.type==="proof"){
    const h2 = document.createElement("h2"); h2.className="ts-h2"; h2.style.fontWeight="700"; h2.textContent = "Proof";
    const logos = document.createElement("div"); logos.className="grid"; logos.style.gridTemplateColumns="repeat(auto-fit, minmax(160px, 1fr))"; logos.style.marginTop="12px";
    (s.logos||[]).forEach(l=>{ const chip=document.createElement("div"); chip.className="logo-chip"; chip.textContent=l; logos.appendChild(chip); });
    const sep = document.createElement("div"); sep.className="thin"; sep.style.margin="12px 0";
    const testi = document.createElement("div"); testi.className="grid"; testi.style.gridTemplateColumns="repeat(auto-fit, minmax(280px, 1fr))";
    (s.testimonials||[]).forEach(t=>{ const card=document.createElement("div"); card.className="panel"; card.style.padding="16px";
      const q=document.createElement("div"); q.className="ts-h6"; q.style.fontStyle="italic"; q.textContent = `“${t.quote}”`;
      const a=document.createElement("div"); a.className="ts-h6"; a.style.marginTop="8px"; a.style.color="var(--muted)"; a.textContent = t.author || "";
      card.append(q,a); testi.appendChild(card);
    });
    wrap.append(h2,logos,sep,testi);

    if (Array.isArray(s.metrics) && s.metrics.length){
      const sep2 = document.createElement("div"); sep2.className="thin"; sep2.style.margin="12px 0";
      const met = document.createElement("div"); met.className="grid"; met.style.gridTemplateColumns="repeat(auto-fit, minmax(220px, 1fr))";
      s.metrics.forEach(m=>{ const card=document.createElement("div"); card.className="panel"; card.style.padding="16px";
        const v=document.createElement("div"); v.className="ts-h3"; v.style.color="var(--accent)"; v.style.fontWeight="700"; v.textContent=m.value;
        const lb=document.createElement("div"); lb.className="ts-h6"; lb.style.color="var(--muted)"; lb.textContent=m.label;
        card.append(v,lb); met.appendChild(card);
      });
      wrap.append(sep2,met);
    }
    return wrap;
  }

  if (s.type==="pricing"){
    const h2=document.createElement("h2"); h2.className="ts-h2"; h2.style.fontWeight="700"; h2.textContent=s.title;
    const note=document.createElement("p"); note.className="ts-h6"; note.style.color="var(--muted)"; note.textContent=s.note||"";
    const grid=document.createElement("div"); grid.className="grid cols-auto"; grid.style.marginTop="12px";
    s.tiers.forEach(t=>{ const card=document.createElement("div"); card.className="panel"; card.style.padding="16px";
      const nm=document.createElement("div"); nm.className="ts-h5"; nm.style.fontWeight="600"; nm.textContent=t.name;
      const pr=document.createElement("div"); pr.className="ts-h3"; pr.style.color="var(--accent)"; pr.style.fontWeight="700"; pr.style.marginTop="4px"; pr.textContent=t.price;
      const ul=document.createElement("ul"); ul.className="ts-h6"; ul.style.marginTop="8px"; ul.style.color="var(--muted)";
      t.items.forEach(x=>{ const li=document.createElement("li"); li.style.marginTop="4px"; li.textContent="• "+x; ul.appendChild(li); });
      const a=document.createElement("a"); a.className="btn"; a.href="#contact"; a.style.marginTop="12px"; a.textContent=`Choose ${t.name}`;
      card.append(nm,pr,ul,a); grid.appendChild(card);
    });
    wrap.append(h2,note,grid); return wrap;
  }

  if (s.type==="cta"){
    const h2=document.createElement("h2"); h2.className="ts-h2"; h2.style.fontWeight="700"; h2.textContent=s.title;
    const a=document.createElement("a"); a.className="btn"; a.href=s.cta.href; a.style.marginTop="12px"; a.textContent=s.cta.label;
    wrap.style.textAlign="center"; wrap.append(h2,a); return wrap;
  }

  if (s.type==="contact"){
    wrap.id="contact";
    const h2=document.createElement("h2"); h2.className="ts-h2"; h2.style.fontWeight="700"; h2.textContent=s.title;
    const em=document.createElement("div"); em.className="ts-h6"; em.style.marginTop="8px"; em.innerHTML=`Email: <a href="mailto:${s.email}" style="color:var(--accent)">${s.email}</a>`;
    const loc = (s.locations||[]).length ? (()=>{ const d=document.createElement("div"); d.className="ts-h6"; d.style.marginTop="4px"; d.style.color="var(--muted)"; d.textContent=`Locations: ${s.locations.join(" · ")}`; return d;})() : null;
    const form=document.createElement("form"); form.className="panel"; form.style.padding="16px"; form.style.marginTop="12px"; form.style.display="grid"; form.style.gap="12px";
    form.innerHTML = `
      <input placeholder="Name" class="input" />
      <input placeholder="Email" class="input" />
      <textarea rows="5" placeholder="Message" class="input"></textarea>
      <button class="btn" type="button">Send</button>
    `;
    wrap.append(h2,em); if(loc) wrap.append(loc); wrap.append(form); return wrap;
  }

  return wrap;
}

/* ===== Form -> brief ===== */
function collectBrief(){
  const val = id => document.getElementById(id).value.trim();
  const asList = (s)=> s ? s.split(",").map(x=>x.trim()).filter(Boolean) : [];
  const asLines = (s)=> s ? s.split("\n").map(x=>x.trim()).filter(Boolean) : [];
  const testi = asLines(document.getElementById("testi").value).map(l=>{
    const [q, a] = l.split("—").map(x=>x && x.trim());
    return q ? {quote:q, author:a||""} : null;
  }).filter(Boolean);
  const metrics = asLines(document.getElementById("metrics").value).map(l=>{
    const [label, value] = l.split(":").map(x=>x && x.trim());
    return label && value ? {label, value} : null;
  }).filter(Boolean);

  return {
    company:{
      name: val("name") || "Your company",
      tagline: val("tagline"),
      locations: asList(val("locations")),
      industry: document.getElementById("industry").value,
      brand: { primary: val("primary")||"#0F172A", secondary: val("secondary")||"#F7F7F7", accent: val("accent")||"#0EA5E9", heroImage: val("hero")||null }
    },
    goals:{ primary: document.getElementById("goal").value, secondary: [] },
    differentiators: asLines(val("diff")),
    proof: { logos: asList(val("logos")), testimonials: testi, metrics },
    pages: { mustHave:["home","services","pricing","contact"] }
  };
}

/* ===== Wire up live updates ===== */
function updateFromForm(){
  const brief = collectBrief();
  document.getElementById("json").value = JSON.stringify(brief, null, 2);
  const dsl = generateDSL(brief);
  renderSite(dsl);
}
["name","tagline","locations","industry","primary","accent","secondary","hero","goal","diff","testi","logos","metrics"].forEach(id=>{
  document.getElementById(id).addEventListener("input", updateFromForm);
});
document.getElementById("loadExample").addEventListener("click", ()=>{
  // fill form with SAMPLE
  document.getElementById("name").value = SAMPLE.company.name;
  document.getElementById("tagline").value = SAMPLE.company.tagline;
  document.getElementById("locations").value = SAMPLE.company.locations.join(", ");
  document.getElementById("industry").value = SAMPLE.company.industry;
  document.getElementById("primary").value = SAMPLE.company.brand.primary;
  document.getElementById("secondary").value = SAMPLE.company.brand.secondary;
  document.getElementById("accent").value = SAMPLE.company.brand.accent;
  document.getElementById("hero").value = SAMPLE.company.brand.heroImage || "";
  document.getElementById("goal").value = SAMPLE.goals.primary;
  document.getElementById("diff").value = SAMPLE.differentiators.join("\n");
  document.getElementById("testi").value = SAMPLE.proof.testimonials.map(t=>`${t.quote} — ${t.author}`).join("\n");
  document.getElementById("logos").value = SAMPLE.proof.logos.join(", ");
  document.getElementById("metrics").value = SAMPLE.proof.metrics.map(m=>`${m.label}: ${m.value}`).join("\n");
  updateFromForm();
});
document.getElementById("json").addEventListener("input", e=>{
  try{
    const b = JSON.parse(e.target.value);
    document.getElementById("err").textContent = "";
    const dsl = generateDSL(b);
    renderSite(dsl);
  }catch(err){
    document.getElementById("err").textContent = "JSON error: " + err.message;
  }
});

/* ===== Export HTML ===== */
document.getElementById("exportHtml").addEventListener("click", ()=>{
  const pageHtml = document.documentElement.outerHTML;
  const blob = new Blob([pageHtml], {type:"text/html"});
  const a = document.createElement("a");
  a.href = URL.createObjectURL(blob);
  a.download = "citeks-generated.html";
  a.click();
  URL.revokeObjectURL(a.href);
});

/* ===== Initial render ===== */
document.getElementById("json").value = JSON.stringify(SAMPLE, null, 2);
document.getElementById("year").textContent = new Date().getFullYear();
renderSite(generateDSL(SAMPLE));
</script>
</body>
</html>
